<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Angelina's Love Sanctuary üíó</title>
  <link rel="manifest" href="/manifest.json">
  <meta name="theme-color" content="#ff8fab"/>
  <style>
    body {
      font-family: 'Arial', sans-serif;
      background: #ffd6e0;
      margin: 0;
      padding: 20px;
      color: #333;
      max-width: 800px;
      margin: auto;
    }

    h1, h2 {
      text-align: center;
      color: #c9184a;
    }

    section {
      background: #fff;
      padding: 20px;
      margin: 20px 0;
      border-radius: 15px;
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
    }

    .button-container {
      display: flex;
      justify-content: center;
      gap: 10px;
      flex-wrap: wrap;
    }

    button {
      padding: 10px 20px;
      border: none;
      border-radius: 30px;
      background: #ff8fab;
      color: white;
      font-size: 16px;
      cursor: pointer;
      transition: 0.3s;
    }

    button:hover {
      opacity: 0.9;
      transform: scale(1.05);
    }

    textarea, input {
      width: 100%;
      padding: 10px;
      margin: 10px 0;
      border: 1px solid #ddd;
      border-radius: 5px;
    }

    #output, #note-list {
      background: #ffe5ec;
      margin-top: 15px;
      padding: 15px;
      border-radius: 10px;
      color: #c9184a;
    }

    ul {
      list-style: none;
      padding: 0;
    }

    ul li {
      padding: 10px;
      background: #ffd6e0;
      margin: 5px 0;
      border-radius: 5px;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    ul li button {
      background: #c9184a;
      font-size: 12px;
      padding: 4px 8px;
    }
  </style>
</head>
<body>
  <h1>üíå For My Angelina üíå</h1>

  <!-- Surprise Message -->
  <section>
    <h2>üíï A Message From Hussam</h2>
    <div class="button-container">
      <button onclick="showMessage()">Show Me Love</button>
    </div>
    <div id="output"></div>
  </section>

  <!-- Journal Notes -->
  <section>
    <h2>üìù Our Journal</h2>
    <textarea id="note-input" placeholder="Write a special note..." rows="4"></textarea>
    <div class="button-container">
      <button onclick="saveNote()">Save Note</button>
    </div>
    <div id="note-list"></div>
  </section>

  <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.5.1/dist/confetti.browser.min.js"></script>
  <script>
    const messages = [
      "I whispered your name in my prayers today.",
      "Ya xate ti, only little.",
      "You're the strongest woman I know‚Äîcarrying our child like a warrior.",
      "Remember when we slow-danced in UAE? Let's do that tonight.",
      "I'd choose you in every lifetime.",
      "Your laugh is my favorite melody.",
      "You're already the perfect mother to our baby.",
      "I fell in love with you all over again every day.",
      "Theodore misses you.... me too!!",
      "Even on your worst days, you're still my dream come true."
    ];

    function showMessage() {
      const msg = messages[Math.floor(Math.random() * messages.length)];
      document.getElementById('output').textContent = msg;
      confetti({ particleCount: 80, spread: 70 });
    }

    function saveNote() {
      const text = document.getElementById('note-input').value.trim();
      if (!text) return;

      const notes = JSON.parse(localStorage.getItem('angelinaNotes') || '[]');
      notes.push({ text, date: new Date().toLocaleDateString() });
      localStorage.setItem('angelinaNotes', JSON.stringify(notes));
      document.getElementById('note-input').value = '';
      renderNotes();
    }

    function deleteNote(index) {
      const notes = JSON.parse(localStorage.getItem('angelinaNotes') || '[]');
      notes.splice(index, 1);
      localStorage.setItem('angelinaNotes', JSON.stringify(notes));
      renderNotes();
    }

    function renderNotes() {
      const notes = JSON.parse(localStorage.getItem('angelinaNotes') || '[]');
      const list = document.getElementById('note-list');
      if (!notes.length) {
        list.innerHTML = "<p>No notes yet.</p>";
        return;
      }

      let html = "<ul>";
      notes.forEach((note, idx) => {
        html += `<li><span><strong>${note.date}:</strong> ${note.text}</span> <button onclick="deleteNote(${idx})">Delete</button></li>`;
      });
      html += "</ul>";
      list.innerHTML = html;
    }

    window.onload = renderNotes;

    if ('serviceWorker' in navigator) {
      navigator.serviceWorker.register('/sw.js')
        .then(() => console.log('Service Worker Registered'));
    }
  </script>
</body>
</html>
