<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>For My Angelina ğŸŒ¸</title>
    <meta name="theme-color" content="#ffd6e0">
    <link rel="manifest" href="manifest.json">
    <style>
        :root {
            --pink: #ffd6e0;
            --dark-pink: #ff8fab;
            --white: #fff;
            --shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        }
        body {
            font-family: 'Arial', sans-serif;
            background: var(--pink);
            color: #333;
            line-height: 1.6;
            padding: 20px;
            max-width: 800px;
            margin: 0 auto;
            min-height: 100vh;
            position: relative;
            overflow-x: hidden;
        }
        h1, h2 { color: #c9184a; text-align: center; }
        section {
            background: var(--white);
            border-radius: 15px;
            padding: 20px;
            margin: 20px 0;
            box-shadow: var(--shadow);
        }
        button {
            background: var(--dark-pink);
            color: var(--white);
            border: none;
            padding: 10px 20px;
            border-radius: 50px;
            cursor: pointer;
            font-size: 16px;
            margin: 5px;
            transition: opacity 0.3s;
        }
        button:hover { opacity: 0.9; }
        .emoji-btn { font-size: 20px; }
        textarea, input {
            width: 100%;
            padding: 10px;
            margin: 5px 0;
            border: 1px solid #ddd;
            border-radius: 5px;
            box-sizing: border-box;
        }
        #baby-names-list {
            list-style: none;
            padding: 0;
        }
        #baby-names-list li {
            background: var(--pink);
            padding: 10px;
            margin: 5px 0;
            border-radius: 5px;
            display: flex;
            justify-content: space-between;
        }
        .progress-bar {
            width: 100%;
            background: #ffe5ec;
            border-radius: 10px;
            margin: 10px 0;
            position: relative;
            height: 20px;
        }
        .progress {
            height: 100%;
            background: #ff8fab;
            border-radius: 10px;
            transition: width 0.5s;
        }
        .progress-bar span {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            color: #fff;
            font-weight: bold;
        }
        #random-message, #affirmation-text {
            font-style: italic;
            margin: 10px 0;
            color: #c9184a;
            min-height: 20px;
            text-align: center;
        }
        #mood-response {
            padding: 10px;
            margin-top: 10px;
            background-color: #ffe5ec;
            border-radius: 10px;
            text-align: center;
        }
        #notes-display {
            margin-top: 15px;
            padding: 10px;
            background-color: #ffe5ec;
            border-radius: 10px;
        }
        #install-btn {
            display: block;
            margin: 20px auto;
            width: 200px;
            text-align: center;
        }
    </style>
</head>
<body>
    <h1>ğŸŒº Hussam & Angelina's Love Sanctuary ğŸŒº</h1>
    
    <!-- Pregnancy Countdown -->
    <section id="pregnancy-countdown">
        <h2>ğŸ‘¶ Our Baby's Journey</h2>
        <p id="countdown"></p>
        <p id="baby-size"></p>
    </section>

    <!-- Mood Tracker -->
    <section id="mood-tracker">
        <h2>ğŸŒˆ How Are You Feeling Today, Angelina?</h2>
        <div>
            <button class="emoji-btn" onclick="logMood('happy')">ğŸ˜Š Happy</button>
            <button class="emoji-btn" onclick="logMood('tired')">ğŸ˜´ Tired</button>
            <button class="emoji-btn" onclick="logMood('emotional')">ğŸ¥º Emotional</button>
            <button class="emoji-btn" onclick="logMood('excited')">ğŸ‰ Excited</button>
        </div>
        <div id="mood-response"></div>
    </section>

    <!-- Daily Affirmation -->
    <section id="daily-affirmation">
        <h2>ğŸŒ¹ Hussam's Daily Affirmation</h2>
        <div id="affirmation-text">"You're already the perfect mother to our baby."</div>
        <button onclick="newAffirmation()">Another One â¡ï¸</button>
    </section>

    <!-- Surprise Button -->
    <section>
        <h2>ğŸ’– Click for a Surprise from Hussam</h2>
        <button onclick="showRandomLove()">Open Love Jar ğŸ’Œ</button>
        <p id="random-message"></p>
    </section>

    <!-- Shared Notes -->
    <section id="shared-notes">
        <h2>ğŸ“ Our Private Journal</h2>
        <textarea id="note-input" placeholder="Write a note for each other..."></textarea>
        <button onclick="saveNote()">Save Note</button>
        <div id="notes-display"></div>
    </section>

    <!-- Baby Names Ideas -->
    <section id="baby-names">
        <h2>ğŸ‘¶ Baby Names We Love</h2>
        <input type="text" id="name-input" placeholder="Add a name...">
        <button onclick="addBabyName()">Add Name</button>
        <ul id="baby-names-list"></ul>
    </section>

    <!-- Install as App Button -->
    <button id="install-btn" style="display: none;">ğŸ“² Install as App</button>

    <script>
        // ===== PREGNANCY COUNTDOWN =====
        const dueDate = new Date('2024-12-15');
        const startDate = new Date('2024-03-11');
        
        function updatePregnancyCountdown() {
            const today = new Date();
            const daysPassed = Math.floor((today - startDate) / (1000 * 60 * 60 * 24));
            const weeks = Math.floor(daysPassed / 7);
            const days = daysPassed % 7;
            
            const daysLeft = Math.floor((dueDate - today) / (1000 * 60 * 60 * 24));
            const weeksLeft = Math.floor(daysLeft / 7);
            const remainingDays = daysLeft % 7;
            
            const progressPercent = Math.min(100, (weeks / 40 * 100)).toFixed(1);
            
            document.getElementById('countdown').innerHTML = `
                <strong>${weeks} weeks & ${days} days</strong> along<br>
                <strong>${weeksLeft} weeks & ${remainingDays} days</strong> to go!<br>
                <div class="progress-bar">
                    <div class="progress" style="width: ${progressPercent}%"></div>
                    <span>${progressPercent}%</span>
                </div>
            `;
            
            const babyMilestones = [
                { week: 13, size: "a peach ğŸ‘", desc: "Baby's tiny fingerprints are forming!" },
                { week: 16, size: "an avocado ğŸ¥‘", desc: "Baby can hear your voice now." },
                { week: 20, size: "a banana ğŸŒ", desc: "Halfway there, my love!" },
                { week: 24, size: "an ear of corn ğŸŒ½", desc: "Baby reacts to your touch." },
                { week: 28, size: "an eggplant ğŸ†", desc: "Eyes can blink now!" },
                { week: 32, size: "a squash ğŸƒ", desc: "Baby dreams in the womb." },
                { week: 36, size: "a honeydew ğŸˆ", desc: "Almost ready to meet us!" },
                { week: 40, size: "a watermelon ğŸ‰", desc: "Happy due date!" }
            ];
            
            let currentSize = "a peach ğŸ‘";
            let currentDesc = "Baby's tiny fingerprints are forming!";
            for (const milestone of babyMilestones) {
                if (weeks >= milestone.week) {
                    currentSize = milestone.size;
                    currentDesc = milestone.desc;
                }
            }
            document.getElementById('baby-size').innerHTML = `
                This week, our baby is the size of <strong>${currentSize}</strong>!<br>
                <small>âœ¨ ${currentDesc}</small>
            `;
        }
        updatePregnancyCountdown();
        setInterval(updatePregnancyCountdown, 86400000);

        // ===== MOOD TRACKER =====
        function logMood(mood) {
            const responses = {
                happy: [
                    "That smile of yours could power the sun. Keep glowing! â˜€ï¸",
                    "Tell me what's making you happyâ€”I want to savor this moment with you.",
                    "You're my favorite reason to celebrate. ğŸ‰"
                ],
                tired: [
                    "Let me draw you a bath tonight. You deserve it, habibti. ğŸ›",
                    "I'll handle everything today. Just rest and grow our baby. ğŸ’¤",
                    "Foot rub + your favorite show? Say the word. ğŸ‘£"
                ],
                emotional: [
                    "Your tears are sacred. I'm here to hold them and you. ğŸ¤—",
                    "Let's cuddle and talkâ€”or just sit in silence. I'm here.",
                    "Pregnancy hormones are no joke. You're doing amazing."
                ],
                excited: [
                    "Your excitement is my favorite sound! Tell me all about it. ğŸ˜„",
                    "We're one step closer to holding our little one! ğŸŠ",
                    "I love seeing you light up like this. What's on your mind?"
                ]
            };
            const randomResponse = responses[mood][Math.floor(Math.random() * responses[mood].length)];
            document.getElementById('mood-response').innerHTML = `
                <p><strong>Hussam says:</strong> ${randomResponse}</p>
            `;
        }

        // ===== DAILY AFFIRMATIONS =====
        const affirmations = [
            "I'm so proud to be your partner in this journey.",
            "You're my greatest adventure.",
            "However you feel today, I'm hereâ€”no conditions.",
            "I'll never stop cherishing the way you laugh.",
            "You're the strongest person I know.",
            "Thank you for carrying our baby so beautifully."
        ];
        function newAffirmation() {
            const randomAffirmation = affirmations[Math.floor(Math.random() * affirmations.length)];
            document.getElementById('affirmation-text').innerHTML = `"${randomAffirmation}"`;
        }

        // ===== SURPRISE BUTTON =====
        function showRandomLove() {
            const messages = [
                "I whispered your name in my prayers today.",
                "You're the strongest woman I knowâ€”carrying our child like a warrior.",
                "Remember when we slow-danced in the kitchen? Let's do that tonight.",
                "I'd choose you in every lifetime.",
                "Your laugh is my favorite melody.",
                "I packed your favorite snack for later. Check the fridge. ğŸ“",
                "You're already the perfect mother to our baby.",
                "I fell in love with you all over again today.",
                "Let's name our baby after something that reminds me of you.",
                "Even on your worst days, you're still my dream come true."
            ];
            const randomMsg = messages[Math.floor(Math.random() * messages.length)];
            document.getElementById('random-message').textContent = randomMsg;
            
            if (typeof confetti === 'function') {
                confetti({ particleCount: 150, spread: 70, origin: { y: 0.6 } });
            }
        }

        // ===== SHARED NOTES =====
        function saveNote() {
            const note = document.getElementById('note-input').value;
            if (!note) return;
            const notes = JSON.parse(localStorage.getItem('loveNotes') || '[]');
            notes.push({ text: note, date: new Date().toLocaleDateString() });
            localStorage.setItem('loveNotes', JSON.stringify(notes));
            displayNotes();
            document.getElementById('note-input').value = '';
        }
        function displayNotes() {
            const notes = JSON.parse(localStorage.getItem('loveNotes') || '[]');
            let html = '';
            notes.forEach(note => {
                html += `<p><strong>${note.date}:</strong> ${note.text}</p>`;
            });
            document.getElementById('notes-display').innerHTML = html;
        }
        displayNotes();

        // ===== BABY NAMES =====
        function addBabyName() {
            const name = document.getElementById('name-input').value.trim();
            if (!name) return;
            const names = JSON.parse(localStorage.getItem('babyNames') || '[]');
            names.push(name);
            localStorage.setItem('babyNames', JSON.stringify(names));
            displayBabyNames();
            document.getElementById('name-input').value = '';
        }
        function displayBabyNames() {
            const names = JSON.parse(localStorage.getItem('babyNames') || '[]');
            let html = '';
            names.forEach(name => {
                html += `<li>${name} <button onclick="removeName('${name}')">âŒ</button></li>`;
            });
            document.getElementById('baby-names-list').innerHTML = html;
        }
        function removeName(name) {
            let names = JSON.parse(localStorage.getItem('babyNames') || '[]');
            names = names.filter(n => n !== name);
            localStorage.setItem('babyNames', JSON.stringify(names));
            displayBabyNames();
        }
        displayBabyNames();

        // ===== PWA INSTALLATION =====
        let deferredPrompt;
        window.addEventListener('beforeinstallprompt', (e) => {
            e.preventDefault();
            deferredPrompt = e;
            document.getElementById('install-btn').style.display = 'block';
        });
        document.getElementById('install-btn').addEventListener('click', () => {
            deferredPrompt.prompt();
            deferredPrompt.userChoice.then(() => {
                deferredPrompt = null;
            });
        });

        // ===== SERVICE WORKER REGISTRATION =====
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('sw.js')
                    .then(registration => console.log('SW registered!'))
                    .catch(err => console.log('SW registration failed: ', err));
            });
        }
    </script>

    <!-- Confetti.js -->
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.5.1/dist/confetti.browser.min.js"></script>
</body>
</html>
